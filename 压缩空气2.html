<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‹ç¼©ç©ºæ°”è™šæ‹Ÿå®éªŒå®¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2a3c7a);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(4px);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .lab-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        @media (max-width: 768px) {
            .lab-container {
                grid-template-columns: 1fr;
            }
        }
        
        .chamber {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(4px);
            position: relative;
            overflow: hidden;
        }
        
        .chamber-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .air-title {
            color: #ff7e5f;
        }
        
        .water-title {
            color: #4facfe;
        }
        
        .chamber-display-container {
            position: relative;
            margin-bottom: 15px;
        }
        
        .chamber-display {
            height: 300px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
            transition: height 0.5s ease;
        }
        
        .air-display {
            background: rgba(0, 0, 0, 0.3);
        }
        
        .water-display {
            background: rgba(32, 82, 149, 0.3);
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .air-btn {
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            color: white;
        }
        
        .water-btn {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            color: white;
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .data-panel {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(4px);
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
        }
        
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        th {
            background: rgba(255, 255, 255, 0.1);
        }
        
        .explanation {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(4px);
            line-height: 1.6;
        }
        
        .explanation h2 {
            margin-bottom: 15px;
            color: #feb47b;
        }
        
        .highlight {
            color: #feb47b;
            font-weight: bold;
        }
        
        .particle {
            position: absolute;
            border-radius: 50%;
            transition: all 0.8s ease;
        }
        
        .air-particle {
            background: radial-gradient(circle at 30% 30%, #ff9a8b, #ff6a6a);
            box-shadow: 0 0 10px #ff6a6a;
        }
        
        .water-particle {
            background: radial-gradient(circle at 30% 30%, #4facfe, #0066cc);
            box-shadow: 0 0 10px #4facfe;
        }
        
        .compression-slider {
            width: 100%;
            margin: 10px 0;
        }
        
        input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            outline: none;
            -webkit-appearance: none;
        }
        
        input[type="range"].air-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        input[type="range"].air-slider {
            background: rgba(255, 126, 95, 0.3);
        }
        
        input[type="range"].water-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
        }
        
        input[type="range"].water-slider {
            background: rgba(79, 172, 254, 0.3);
        }
        
        .experiment-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        
        .experiment-btn {
            padding: 15px 30px;
            font-size: 1.1rem;
        }
        
        .comparison-btn {
            background: linear-gradient(90deg, #8e2de2, #4a00e0);
            color: white;
        }
        
        .reset-btn {
            background: linear-gradient(90deg, #11998e, #38ef7d);
            color: white;
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .active {
            background: #38ef7d;
            box-shadow: 0 0 10px #38ef7d;
        }
        
        .compressed {
            background: #ff6a6a;
            box-shadow: 0 0 10px #ff6a6a;
        }
        
        /* å‹ç¼©åŒºåŸŸçº¢æ¡† */
        .compression-zone {
            position: absolute;
            width: 100%;
            bottom: 0;
            border: 3px solid #ff3333;
            border-radius: 8px;
            transition: all 0.3s ease;
            z-index: 5;
            pointer-events: none;
        }
        
        .particle-count {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            z-index: 5;
        }
        
        .compression-indicator {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 10px;
            border-radius: 10px;
            font-size: 0.8rem;
            z-index: 5;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ”¬ å‹ç¼©ç©ºæ°”è™šæ‹Ÿå®éªŒå®¤</h1>
            <p class="subtitle">æ¢ç´¢ç©ºæ°”ä¸æ°´åœ¨å¾®è§‚ç²’å­å±‚é¢çš„å‹ç¼©ç‰¹æ€§å·®å¼‚</p>
        </header>
        
        <div class="lab-container">
            <div class="chamber">
                <h2 class="chamber-title air-title">
                    <span class="status-indicator active" id="air-status"></span>
                    ğŸŸ¥ ç©ºæ°”ç²’å­èˆ±
                </h2>
                <div class="chamber-display-container">
                    <div class="chamber-display air-display" id="air-display">
                        <div class="compression-zone" id="air-zone"></div>
                        <div class="particle-count" id="air-particle-count">ç²’å­: 25</div>
                        <div class="compression-indicator" id="air-compression-indicator">å‹ç¼©: 0%</div>
                    </div>
                </div>
                <div class="compression-slider">
                    <input type="range" min="0" max="90" value="0" class="air-slider" id="air-slider">
                </div>
                <p>å‹ç¼©ç¨‹åº¦: <span id="air-compression-level">0%</span> (æœ€å¤§90%)</p>
            </div>
            
            <div class="chamber">
                <h2 class="chamber-title water-title">
                    <span class="status-indicator active" id="water-status"></span>
                    ğŸŸ¦ æ°´ç²’å­èˆ±
                </h2>
                <div class="chamber-display-container">
                    <div class="chamber-display water-display" id="water-display">
                        <div class="compression-zone" id="water-zone"></div>
                        <div class="particle-count" id="water-particle-count">ç²’å­: 40</div>
                        <div class="compression-indicator" id="water-compression-indicator">å‹ç¼©: 0%</div>
                    </div>
                </div>
                <div class="compression-slider">
                    <input type="range" min="0" max="1" step="0.1" value="0" class="water-slider" id="water-slider">
                </div>
                <p>å‹ç¼©ç¨‹åº¦: <span id="water-compression-level">0%</span> (æœ€å¤§1%)</p>
            </div>
        </div>
        
        <div class="data-panel">
            <h2>ğŸ“Š å®æ—¶æ•°æ®ç›‘æ§</h2>
            <table>
                <thead>
                    <tr>
                        <th>å‚æ•°</th>
                        <th>ç©ºæ°”èˆ±</th>
                        <th>æ°´èˆ±</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>ç²’å­é—´è·</td>
                        <td id="air-spacing">8.2 nm</td>
                        <td id="water-spacing">0.3 nm</td>
                    </tr>
                    <tr>
                        <td>å¯å‹ç¼©æ€§</td>
                        <td id="air-compressibility">é«˜</td>
                        <td id="water-compressibility">æä½</td>
                    </tr>
                    <tr>
                        <td>å½“å‰çŠ¶æ€</td>
                        <td id="air-state">è‡ªç”±è¿åŠ¨</td>
                        <td id="water-state">ç´§å¯†å †ç§¯</td>
                    </tr>
                    <tr>
                        <td>å®¹å™¨ä½“ç§¯</td>
                        <td id="air-volume">100%</td>
                        <td id="water-volume">100%</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <div class="experiment-controls">
            <button class="experiment-btn reset-btn" onclick="resetExperiment()">é‡ç½®å®éªŒ</button>
        </div>
        
        <div class="explanation">
            <h2>ğŸ’¡ ç§‘å­¦åŸç†è§£é‡Š</h2>
            <p id="explanation-text">æ‹–åŠ¨æ»‘åŠ¨æ¡å¼€å§‹å®éªŒï¼Œè§‚å¯Ÿç©ºæ°”ä¸æ°´çš„å‹ç¼©ç‰¹æ€§å·®å¼‚ã€‚</p>
            <div id="detailed-explanation" style="margin-top: 15px; display: none;">
                <p><span class="highlight">ç©ºæ°”å‹ç¼©æ€§é«˜</span>ï¼šå› ä¸ºç©ºæ°”åˆ†å­é—´è·å¤§(8.2nm)ï¼Œæœ‰å……è¶³çš„å‹ç¼©ç©ºé—´ã€‚å½“æ–½åŠ å‹åŠ›æ—¶ï¼Œåˆ†å­å¯ä»¥é å¾—æ›´è¿‘ï¼Œè¿åŠ¨é€Ÿåº¦å¢åŠ ã€‚</p>
                <p><span class="highlight">æ°´å‹ç¼©æ€§æä½</span>ï¼šå› ä¸ºæ°´åˆ†å­é—´è·å°(0.3nm)ï¼Œå·²ç»ç´§å¯†å †ç§¯ï¼Œå‡ ä¹æ²¡æœ‰è¿›ä¸€æ­¥å‹ç¼©çš„ç©ºé—´ã€‚</p>
                <p><span class="highlight">ç§‘å­¦åŸç†</span>ï¼šç‰©è´¨çš„å¯å‹ç¼©æ€§å–å†³äºç²’å­é—´çš„é—´è·å¤§å°ã€‚çº¢è‰²è¾¹æ¡†è¡¨ç¤ºå‹ç¼©åŒºåŸŸï¼Œæ‰€æœ‰ç²’å­éƒ½è¢«é™åˆ¶åœ¨æ­¤åŒºåŸŸå†…è¿åŠ¨ã€‚</p>
            </div>
        </div>
    </div>

    <script>
        // åˆå§‹åŒ–å˜é‡
        let airCompression = 0;
        let waterCompression = 0;
        let airParticles = [];
        let waterParticles = [];
        const airParticleCount = 25;
        const waterParticleCount = 40;
        let airAnimationId;
        let waterAnimationId;
        
        // åˆå§‹åŒ–å®éªŒå®¤
        function initLab() {
            createParticles('air-display', airParticleCount, 'air-particle', airParticles, 15);
            createParticles('water-display', waterParticleCount, 'water-particle', waterParticles, 3);
            updateDataPanel();
            
            // åˆå§‹åŒ–å‹ç¼©åŒºåŸŸ
            document.getElementById('air-zone').style.height = '300px';
            document.getElementById('water-zone').style.height = '300px';
            
            // æ·»åŠ æ»‘åŠ¨æ¡äº‹ä»¶ç›‘å¬
            document.getElementById('air-slider').addEventListener('input', function(e) {
                airCompression = parseInt(e.target.value);
                updateAirCompression();
            });
            
            document.getElementById('water-slider').addEventListener('input', function(e) {
                waterCompression = parseFloat(e.target.value);
                updateWaterCompression();
            });
            
            // å¯åŠ¨ç²’å­åŠ¨ç”»
            startAirAnimation();
            startWaterAnimation();
        }
        
        // åˆ›å»ºç²’å­
        function createParticles(containerId, count, className, particlesArray, spacing) {
            const container = document.getElementById(containerId);
            // æ¸…é™¤ç°æœ‰ç²’å­ï¼Œä½†ä¿ç•™å‹ç¼©åŒºåŸŸå’Œè®¡æ•°
            const zone = container.querySelector('.compression-zone');
            const countElement = container.querySelector('.particle-count');
            const compressionIndicator = container.querySelector('.compression-indicator');
            container.innerHTML = '';
            if (zone) {
                container.appendChild(zone);
            }
            if (countElement) {
                container.appendChild(countElement);
            }
            if (compressionIndicator) {
                container.appendChild(compressionIndicator);
            }
            particlesArray.length = 0;
            
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            
            for (let i = 0; i < count; i++) {
                const particle = document.createElement('div');
                particle.className = `particle ${className}`;
                
                // éšæœºä½ç½®ï¼Œä½†ç¡®ä¿ä¸ä¼šå¤ªé è¿‘è¾¹ç¼˜
                const size = className === 'air-particle' ? 10 : 14;
                const maxX = containerWidth - size;
                const maxY = containerHeight - size;
                
                let x, y, validPosition;
                let attempts = 0;
                
                // å°è¯•æ‰¾åˆ°ä¸é‡å çš„ä½ç½®
                do {
                    x = Math.random() * maxX;
                    y = Math.random() * maxY;
                    validPosition = true;
                    
                    // æ£€æŸ¥æ˜¯å¦ä¸ç°æœ‰ç²’å­å¤ªè¿‘
                    for (const p of particlesArray) {
                        const dx = x - p.x;
                        const dy = y - p.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);
                        
                        if (distance < spacing) {
                            validPosition = false;
                            break;
                        }
                    }
                    
                    attempts++;
                    if (attempts > 100) break; // é˜²æ­¢æ— é™å¾ªç¯
                } while (!validPosition);
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                
                container.appendChild(particle);
                
                particlesArray.push({
                    element: particle,
                    x: x,
                    y: y,
                    size: size,
                    vx: (Math.random() - 0.5) * (className === 'air-particle' ? 1.2 : 0.05),
                    vy: (Math.random() - 0.5) * (className === 'air-particle' ? 1.2 : 0.05)
                });
            }
        }
        
        // ç©ºæ°”ç²’å­åŠ¨ç”»
        function startAirAnimation() {
            const container = document.getElementById('air-display');
            const containerWidth = container.clientWidth;
            const zone = document.getElementById('air-zone');
            
            function animate() {
                const zoneHeight = parseInt(zone.style.height) || 300;
                const containerHeight = container.clientHeight;
                const availableHeight = zoneHeight;
                const minY = containerHeight - availableHeight;
                
                // å‹ç¼©æ—¶é€Ÿåº¦æ˜æ˜¾åŠ å¿«
                const speedMultiplier = 1 + (airCompression / 90) * 4;
                
                for (const p of airParticles) {
                    // æ›´æ–°ä½ç½®
                    p.x += p.vx * speedMultiplier;
                    p.y += p.vy * speedMultiplier;
                    
                    // è¾¹ç•Œæ£€æµ‹ - é™åˆ¶åœ¨çº¢æ¡†å†…ï¼ˆå·¦å³è¾¹ç•Œï¼‰
                    if (p.x <= 0 || p.x >= containerWidth - p.size) {
                        p.vx *= -1;
                        p.x = p.x <= 0 ? 0 : containerWidth - p.size;
                    }
                    
                    // è¾¹ç•Œæ£€æµ‹ - é™åˆ¶åœ¨çº¢æ¡†å†…ï¼ˆä¸Šä¸‹è¾¹ç•Œï¼‰
                    if (p.y <= minY || p.y >= containerHeight - p.size) {
                        p.vy *= -1;
                        p.y = p.y <= minY ? minY : containerHeight - p.size;
                    }
                    
                    // å¼ºåˆ¶é™åˆ¶ç²’å­å¿…é¡»åœ¨çº¢æ¡†å†…
                    if (p.y < minY) {
                        p.y = minY;
                        p.vy = Math.abs(p.vy);
                    }
                    if (p.y > containerHeight - p.size) {
                        p.y = containerHeight - p.size;
                        p.vy = -Math.abs(p.vy);
                    }
                    if (p.x < 0) {
                        p.x = 0;
                        p.vx = Math.abs(p.vx);
                    }
                    if (p.x > containerWidth - p.size) {
                        p.x = containerWidth - p.size;
                        p.vx = -Math.abs(p.vx);
                    }
                    
                    // æ›´æ–°å…ƒç´ ä½ç½®
                    p.element.style.left = `${p.x}px`;
                    p.element.style.top = `${p.y}px`;
                }
                
                airAnimationId = requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        // æ°´ç²’å­åŠ¨ç”»
        function startWaterAnimation() {
            const container = document.getElementById('water-display');
            const containerWidth = container.clientWidth;
            const zone = document.getElementById('water-zone');
            
            function animate() {
                const zoneHeight = parseInt(zone.style.height) || 300;
                const containerHeight = container.clientHeight;
                const availableHeight = zoneHeight;
                const minY = containerHeight - availableHeight;
                
                // å‹ç¼©æ—¶é€Ÿåº¦æ˜æ˜¾åŠ å¿«
                const speedMultiplier = 1 + (waterCompression / 1) * 2;
                
                for (const p of waterParticles) {
                    // æ°´ç²’å­è¿åŠ¨éå¸¸æœ‰é™
                    p.x += p.vx * speedMultiplier;
                    p.y += p.vy * speedMultiplier;
                    
                    // è¾¹ç•Œæ£€æµ‹ - é™åˆ¶åœ¨çº¢æ¡†å†…ï¼ˆå·¦å³è¾¹ç•Œï¼‰
                    if (p.x <= 0 || p.x >= containerWidth - p.size) {
                        p.vx *= -1;
                        p.x = p.x <= 0 ? 0 : containerWidth - p.size;
                    }
                    
                    // è¾¹ç•Œæ£€æµ‹ - é™åˆ¶åœ¨çº¢æ¡†å†…ï¼ˆä¸Šä¸‹è¾¹ç•Œï¼‰
                    if (p.y <= minY || p.y >= containerHeight - p.size) {
                        p.vy *= -1;
                        p.y = p.y <= minY ? minY : containerHeight - p.size;
                    }
                    
                    // å¼ºåˆ¶é™åˆ¶ç²’å­å¿…é¡»åœ¨çº¢æ¡†å†…
                    if (p.y < minY) {
                        p.y = minY;
                        p.vy = Math.abs(p.vy);
                    }
                    if (p.y > containerHeight - p.size) {
                        p.y = containerHeight - p.size;
                        p.vy = -Math.abs(p.vy);
                    }
                    if (p.x < 0) {
                        p.x = 0;
                        p.vx = Math.abs(p.vx);
                    }
                    if (p.x > containerWidth - p.size) {
                        p.x = containerWidth - p.size;
                        p.vx = -Math.abs(p.vx);
                    }
                    
                    // æ›´æ–°å…ƒç´ ä½ç½®
                    p.element.style.left = `${p.x}px`;
                    p.element.style.top = `${p.y}px`;
                }
                
                waterAnimationId = requestAnimationFrame(animate);
            }
            
            animate();
        }
        
        // æ›´æ–°ç©ºæ°”å‹ç¼©
        function updateAirCompression() {
            document.getElementById('air-compression-level').textContent = `${airCompression}%`;
            document.getElementById('air-compression-indicator').textContent = `å‹ç¼©: ${airCompression}%`;
            
            // æ›´æ–°å‹ç¼©åŒºåŸŸé«˜åº¦ï¼ˆä»300pxå‹ç¼©åˆ°30pxï¼‰
            const zoneHeight = 300 - (airCompression / 100) * 270;
            document.getElementById('air-zone').style.height = `${zoneHeight}px`;
            
            // ç«‹å³è°ƒæ•´æ‰€æœ‰ç²’å­ä½ç½®åˆ°æ–°åŒºåŸŸå†…
            const container = document.getElementById('air-display');
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            const minY = containerHeight - zoneHeight;
            
            for (const p of airParticles) {
                // å¼ºåˆ¶å°†æ‰€æœ‰ç²’å­ç§»å…¥çº¢æ¡†åŒºåŸŸ
                if (p.y < minY) {
                    p.y = minY + (p.y % (zoneHeight - p.size));
                    if (p.y < minY) p.y = minY;
                    if (p.y > containerHeight - p.size) p.y = containerHeight - p.size;
                }
                // ç¡®ä¿ç²’å­åœ¨å·¦å³è¾¹ç•Œå†…
                if (p.x < 0) p.x = 0;
                if (p.x > containerWidth - p.size) p.x = containerWidth - p.size;
                
                // ç«‹å³æ›´æ–°æ˜¾ç¤ºä½ç½®
                p.element.style.left = `${p.x}px`;
                p.element.style.top = `${p.y}px`;
            }
            
            updateDataPanel();
            
            if (airCompression > 0) {
                document.getElementById('explanation-text').textContent = 
                    `ç©ºæ°”è¢«å‹ç¼©äº†${airCompression}%ï¼æ³¨æ„ç²’å­è¢«é™åˆ¶åœ¨çº¢æ¡†å†…ï¼Œè¿åŠ¨é€Ÿåº¦æ˜æ˜¾å˜å¿«ï¼Œé—´è·å˜å°ã€‚`;
                document.getElementById('detailed-explanation').style.display = 'block';
            }
        }
        
        // æ›´æ–°æ°´å‹ç¼©
        function updateWaterCompression() {
            document.getElementById('water-compression-level').textContent = `${waterCompression.toFixed(1)}%`;
            document.getElementById('water-compression-indicator').textContent = `å‹ç¼©: ${waterCompression.toFixed(1)}%`;
            
            // æ›´æ–°å‹ç¼©åŒºåŸŸé«˜åº¦ï¼ˆä»300pxå‹ç¼©åˆ°297pxï¼‰
            const zoneHeight = 300 - (waterCompression / 1) * 3;
            document.getElementById('water-zone').style.height = `${zoneHeight}px`;
            
            // ç«‹å³è°ƒæ•´æ‰€æœ‰ç²’å­ä½ç½®åˆ°æ–°åŒºåŸŸå†…
            const container = document.getElementById('water-display');
            const containerWidth = container.clientWidth;
            const containerHeight = container.clientHeight;
            const minY = containerHeight - zoneHeight;
            
            for (const p of waterParticles) {
                // å¼ºåˆ¶å°†æ‰€æœ‰ç²’å­ç§»å…¥çº¢æ¡†åŒºåŸŸ
                if (p.y < minY) {
                    p.y = minY + (p.y % (zoneHeight - p.size));
                    if (p.y < minY) p.y = minY;
                    if (p.y > containerHeight - p.size) p.y = containerHeight - p.size;
                }
                // ç¡®ä¿ç²’å­åœ¨å·¦å³è¾¹ç•Œå†…
                if (p.x < 0) p.x = 0;
                if (p.x > containerWidth - p.size) p.x = containerWidth - p.size;
                
                // ç«‹å³æ›´æ–°æ˜¾ç¤ºä½ç½®
                p.element.style.left = `${p.x}px`;
                p.element.style.top = `${p.y}px`;
            }
            
            updateDataPanel();
            
            if (waterCompression > 0) {
                document.getElementById('explanation-text').textContent = 
                    `æ°´è¢«å‹ç¼©äº†${waterCompression.toFixed(1)}%ï¼æ³¨æ„åˆ°å‡ ä¹æ²¡æœ‰å˜åŒ–å—ï¼Ÿæ°´åˆ†å­å·²ç»ç´§å¯†å †ç§¯ï¼Œå‡ ä¹æ²¡æœ‰å‹ç¼©ç©ºé—´ã€‚`;
                document.getElementById('detailed-explanation').style.display = 'block';
            }
        }
        
        // é‡ç½®å®éªŒ
        function resetExperiment() {
            airCompression = 0;
            waterCompression = 0;
            
            document.getElementById('air-slider').value = 0;
            document.getElementById('water-slider').value = 0;
            document.getElementById('air-compression-level').textContent = '0%';
            document.getElementById('water-compression-level').textContent = '0%';
            document.getElementById('air-compression-indicator').textContent = 'å‹ç¼©: 0%';
            document.getElementById('water-compression-indicator').textContent = 'å‹ç¼©: 0%';
            
            document.getElementById('air-zone').style.height = '300px';
            document.getElementById('water-zone').style.height = '300px';
            
            document.getElementById('explanation-text').textContent = 
                "å®éªŒå·²é‡ç½®ï¼æ‹–åŠ¨æ»‘åŠ¨æ¡å¼€å§‹æ–°çš„æ¢ç´¢ã€‚";
            document.getElementById('detailed-explanation').style.display = 'none';
            
            // åœæ­¢åŠ¨ç”»
            cancelAnimationFrame(airAnimationId);
            cancelAnimationFrame(waterAnimationId);
            
            initLab();
        }
        
        // æ›´æ–°æ•°æ®é¢æ¿
        function updateDataPanel() {
            // æ›´æ–°ç©ºæ°”æ•°æ®
            document.getElementById('air-spacing').textContent = 
                `${(8.2 - (airCompression / 100) * 7.5).toFixed(1)} nm`;
            document.getElementById('air-volume').textContent = 
                `${100 - airCompression}%`;
            document.getElementById('air-state').textContent = 
                airCompression > 0 ? 'è¢«å‹ç¼©' : 'è‡ªç”±è¿åŠ¨';
            
            // æ›´æ–°æ°´æ•°æ®
            document.getElementById('water-spacing').textContent = 
                `${(0.3 - (waterCompression / 100) * 0.05).toFixed(2)} nm`;
            document.getElementById('water-volume').textContent = 
                `${100 - waterCompression * 0.1}%`;
            document.getElementById('water-state').textContent = 
                waterCompression > 0 ? 'è½»å¾®å‹ç¼©' : 'ç´§å¯†å †ç§¯';
            
            // æ›´æ–°çŠ¶æ€æŒ‡ç¤ºå™¨
            document.getElementById('air-status').className = 
                `status-indicator ${airCompression > 0 ? 'compressed' : 'active'}`;
            document.getElementById('water-status').className = 
                `status-indicator ${waterCompression > 0 ? 'compressed' : 'active'}`;
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–å®éªŒå®¤
        window.onload = initLab;
    </script>
</body>
</html>